{% extends "base.html" %}

{% block title %}Enter submission{% endblock %}

{% block content %}

<div class="row">
	<h1> Model submissions </h1>
	<hr>

    <!-- Upload form. Note enctype attribute! -->
    <div class="col-lg-offset-2 col-lg-8">
    <div class="jumbotron">
        <p class="lead">Submit your predicted scores for the the churn target. File must have a predicted score in each line with 10 decimal places at most.</p>
        <form action="{% url 'list' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p>{{ form.non_field_errors }}</p>
            <p>{{ form.submissionfile.errors }}{{ form.submissionfile }}</p>
            <p><input class="btn-primary" type="submit" value="Upload" /></p>
        </form>
    </div>
    </div>

    <!-- List of uploaded submissions -->
    <div class="col-lg-offset-2 col-lg-8">
    {% if submissions %}
        <table class="table">
        <thead>
        	<th>file</th>
        	<th>date</th>
        	<th>auc</th>
		</thead>
        <tbody>
        {% for submission in submissions %}
          <tr>
            <td><a href="{{ submission.submissionfile.url }}">{{ submission.submissionfile.name }}</a></td>      
            <td>{{submission.created_at}}</td>
            {% if not submission.file_error %}
                <td>{{submission.auc_public}}</td>
            {% else %}
                <td>{{submission.file_error}}</td>
            {% end %}
          </tr>
        {% endfor %}
        </tbody>
        </table> 
    
    {% else %}
        <p>No submissions yet.</p>
    {% endif %}
    </div>
</div>

{% endblock content %}